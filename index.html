<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Dá»± ÄoÃ¡n TÃ i/Xá»‰u AI</title>
  <style>
    body {
      background: #101820;
      color: #fff;
      font-family: Arial, sans-serif;
      text-align: center;
      padding-top: 50px;
    }
    .box {
      background: #1f2d3d;
      padding: 20px;
      border-radius: 10px;
      display: inline-block;
      min-width: 340px;
      box-shadow: 0 0 15px #00ffc3;
    }
    .box h2 { color: #00ffc3; }
    .data { margin: 10px 0; font-size: 18px; }
    #status { margin-top: 15px; font-style: italic; color: #ccc; }
    .highlight { font-weight: bold; }
    .tai { color: #ff4b4b; }  /* Äá» */
    .xiu { color: #4bd865; }  /* Xanh */
  </style>
</head>
<body>

<div class="box">
  <h2>Dá»± ÄoÃ¡n AI TÃ i/Xá»‰u</h2>
  <div class="data" id="phien">ğŸ² PhiÃªn: ...</div>
  <div class="data" id="tong">ğŸ§® Tá»•ng: ...</div>
  <div class="data" id="ketqua">âœ… Káº¿t quáº£: ...</div>
  <div class="data" id="du_doan">ğŸ¤– AI dá»± Ä‘oÃ¡n: ...</div>
  <div class="data" id="tincay">ğŸ“Š Äá»™ tin cáº­y: ...</div>
  <div class="data" id="tile">ğŸ“ˆ ÄÃºng/Sai: ...</div>
  <div class="data" id="phanTich">ğŸ§  PhÃ¢n tÃ­ch: ...</div>
  <div id="status">â³ Äang láº¥y dá»¯ liá»‡u...</div>
</div>

<script>
  async function taiDuDoan() {
    try {
      const res = await fetch("/api/du-doan");
      const data = await res.json();

      const prediction = data.prediction;
      const icon = prediction === "TÃ i" ? "ğŸ”¥" : "â„ï¸";
      const colorClass = prediction === "TÃ i" ? "tai" : "xiu";

      document.getElementById("phien").innerText = `ğŸ² PhiÃªn: ${data.Phien}`;
      document.getElementById("tong").innerText = `ğŸ§® Tá»•ng: ${data.Tong}`;
      document.getElementById("ketqua").innerText = `âœ… Káº¿t quáº£: ${data.Ket_qua}`;
      document.getElementById("du_doan").innerHTML =
        `ğŸ¤– AI dá»± Ä‘oÃ¡n phiÃªn ${data.Next_phien}: <span class="highlight ${colorClass}">${prediction}</span>`;
      document.getElementById("tincay").innerText = `ğŸ“Š Äá»™ tin cáº­y: ${data.tincay}`;
      document.getElementById("tile").innerText = `ğŸ“ˆ ÄÃºng: ${data.Dudoan_dung} | Sai: ${data.Dudoan_sai}`;

      const rules = data.expert_votes || [];
      const html = rules.map(rule => `â€¢ ${rule}`).join("<br>");
      document.getElementById("phanTich").innerHTML = `ğŸ§  PhÃ¢n tÃ­ch:<br>${html}`;

      document.getElementById("status").innerText = `âœ… ÄÃ£ cáº­p nháº­t lÃºc ${new Date().toLocaleTimeString()}`;
    } catch (err) {
      document.getElementById("status").innerText = "âŒ Lá»—i láº¥y dá»¯ liá»‡u tá»« server.";
    }
  }

  taiDuDoan();
  setInterval(taiDuDoan, 5000);
</script>

</body>
</html>
